import 'std.json'
import 'std.ffi'

/*
 Library: owm. Type: observatory
 | owm library
 | todo: add forecast
*/
type Observatory(api_key) {
    lib := ffi.load(
        '/libowm.so',
        [
            {
               'name': 'weather',
               'out': 'string',
               'params': ['ptr', 'ptr', 'ptr']
            }
        ]
    )
    fn request(city, lang) {
        return json.decode(lib.call('weather',[city, api_key, lang]))
    }
}